#include "stdio.h"
#include "math.h"//如果大数类使用了FFT乘法（lintm2）
#include "time.h"//如果要保留计算时间的功能
//数组大数 的全部内容
//素数与质因数 的全部内容
int main() {
	int i, n;
	time_t s, e1, e2, e3, e4;
	struct lint *a = NULL; struct pri *p = NULL;
	lintnew(&a);

	while (1) {
		
		printf("输入n (0<n<=1亿) 开始计算n！:");				//时间
		scanf("%d", &n);										s = clock();
											
		//筛质数
		if (n < 1)n = 1; 
		priset(&p, n + 1);
		//priset(&p, 3);
																e1 = clock() - s;
		//填质因数表
		priffact(p, n, 1);
		//prif1(p, 2, n);
		//计算											
																e2 = clock() - s;
		linta(a, 1); pri2lint(p, a);							e3 = clock() - s;
		//打印
		lintprintf(a);
		pridelete(p);
		lintresetv(a); lintchecksize(a, 0);						e4 = clock() - s;
		//统计信息 32位似乎有一些打印问题？
		printf("\n    %dms 筛质数    |    %dms(+%d) 分解质因数    |    %dms(+%d) 运算    |    %dms(+%d) 打印\n", (int)e1
			, (int)e2, (int)e2 - e1
			, (int)e3, (int)e3 - e2
			, (int)e4, (int)e4 - e3);
	}
	return 0;
}
